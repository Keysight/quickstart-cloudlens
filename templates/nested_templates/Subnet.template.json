{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "Template to create a subnet: Version: 0.1",
  "Parameters" : {
    "CloudlensAvailabilityZone": {
      "Type" : "String",
      "Description" : "Subnet Availability zone",
      "Default" : "CloudLens Quickstart Availability zone"
    },
    "SubnetName" : {
      "Type" : "String",
      "Description" : "Subnet Name",
      "Default" : "CloudLens Quickstart Subnet"
    },
    "SubnetCidrBlock" : {
      "Type" : "String",
      "Description" : "Subnet CIDR Block where CloudLens would be deployed",
      "MinLength" : "9",
      "MaxLength" : "18",
      "AllowedPattern" : "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
      "ConstraintDescription" : "must be a valid IP CIDR range of the form x.x.x.x/16 to x.x.x.x/28.",
      "Default" : "10.0.1.0/24"
    },
    "VPC" : {
      "Description" : "VPC Id is required to create a subnet",
      "Type" : "AWS::EC2::VPC::Id"
    },
    "MapPublicIpOnLaunch": {
        "Type": "String",
        "Description": "Automatically enable public ip to instances created in this subnet",
        "AllowedValues": [
            "true",
            "false"
        ],
        "Default": "true"
    }
  },
  "Resources" : {
    "Subnet" : {
      "Type" : "AWS::EC2::Subnet",
      "Properties" : {
        "AvailabilityZone": {
          "Ref": "CloudlensAvailabilityZone"
        },
        "CidrBlock" : {
          "Ref" : "SubnetCidrBlock"
        },
        "VpcId" : {
          "Ref" : "VPC"
        },
        "MapPublicIpOnLaunch":{
            "Ref": "MapPublicIpOnLaunch"
        },
        "Tags" : [ {
          "Key" : "Name",
          "Value" : { "Ref" : "SubnetName" }
        },
        {
          "Key" : "CreatedBy",
          "Value" : "CloudLens-QuickStart-Template"
        } ]
      }
    }
  },
  "Outputs" : {
    "SubnetId" : {
      "Value" : {
        "Ref" : "Subnet"
      }
    }
  }
}
